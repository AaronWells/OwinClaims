<!DOCTYPE html>
<html ng-app="app">
<head>
    <title>Relay State</title>
    <meta charset="utf-8" />
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
    <script type="text/javascript">
        var app = angular.module('app', []);

        app.controller('RelayState', ['$scope',
            function RelayState($scope) {
                $scope.idp = "https://adfs.doubleline.us/adfs/ls/idpinitiatedsignon.aspx";
                $scope.rpid = "https://76.227.150.19";
                $scope.relayState = "https://localhost:44333/secure";
                $scope.getRelayStateURL = function () {
                    var _rpid = window.encodeURIComponent($scope.rpid);
                    var _relayState = window.encodeURIComponent($scope.relayState);
                    var _url = "RPID=" + _rpid + "&RelayState=" + _relayState;
                    return $scope.idp + "?RelayState=" + window.encodeURIComponent(_url);
                };
            }
        ]);
    </script>
</head>
<body role="document">
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Relying Party Link Generator</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/secure">Secure</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>
    <!-- ReSharper disable once Html.PathError -->
    <div class="container" ng-controller="RelayState">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Inputs</h3>
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <label for="txtIdp">Identity Provider (IDP)</label>
                    <input id="txtIdp" class="form-control" type="text" ng-model="idp" placeholder="Enter the IDP initiated sign on URL here">
                </div>
                <div class="form-group">
                    <label for="txtRpid">Relying Party Identifier (RDIP)</label>
                    <input id="txtRpid" class="form-control" type="text" ng-model="rpid" placeholder="Enter the relying party's identifier here">
                </div>
                <div class="form-group">
                    <label for="txtRelay">Relay State</label>
                    <input id="txtRelay" class="form-control" type="text" ng-model="relayState" placeholder="Enter the relay state here">
                </div>
            </div>
        </div><div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Generated Relay State Link</h3>
            </div>
            <div class="panel-body">
                <a href="{{getRelayStateURL()}}">{{getRelayStateURL()}}</a>
            </div>
        </div>
    </div>
</body>
</html>
